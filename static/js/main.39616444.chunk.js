(this.webpackJsonpplanets=this.webpackJsonpplanets||[]).push([[0],{131:function(e,n,t){},146:function(e,n){},176:function(e,n,t){"use strict";t.r(n);var i=t(4),a=t(0),c=t.n(a),s=t(15),l=t.n(s),o=(t(131),t(19)),r=t(5),u=t(9),j=t(17),b=t(2),O=Object(a.createContext)(null),d=function(e){var n=Object(u.a)(e,2),t=n[0],i=n[1];return[b.MathUtils.radToDeg(i),90-b.MathUtils.radToDeg(t)]},f=function(e){var n=Object(u.a)(e,2),t=n[0],i=n[1];return[b.MathUtils.degToRad(90-i),b.MathUtils.degToRad(t)]},S=function(e){var n=Object(u.a)(e,2),t=n[0],i=n[1];return[Math.PI-Math.acos(2*i-1),2*Math.PI*t-Math.PI]},g=function(){return Object(a.useContext)(O)},h={planet:{biomes:[{color:"steelblue",noiseMax:0},{color:"lemonchiffon",noiseMax:.2},{color:"yellowgreen",noiseMax:.4},{color:"forestgreen",noiseMax:.6},{color:"burlywood",noiseMax:.8},{color:"snow",noiseMax:1}],elevationOffset:.5,elevationScale:.5/3,noiseDistanceX:0,noiseDistanceY:0,noiseDistanceZ:0,noiseMin:0,noiseRadius:1,noiseScaleX:1,noiseScaleY:1,noiseScaleZ:1,minDistance:.04,position:[0,0,0],radius:1,seed:Date.now().toString(),tries:8}},m=Object(a.createContext)(h),x=function(){return Object(a.useContext)(m)},v=function(e){var n=e.center,t=e.polygon,a=Object(j.a)(e,["center","polygon"]),c=Object(o.e)((function(e){var n=e.vertices,i=p(n);i.center.set(0,0,0),i.origin.set(0,0,0);for(var a=0;a<t.length;a++)i.polygon[a].copy(t[a]),i.center.add(t[a]);i.center.divideScalar(t.length)}),[n,t]);return Object(i.jsx)("coneGeometry",Object(r.a)({args:[1,1,t.length],name:"TileGeometry",ref:c},a))},p=function(e){return{center:e[e.length-1],origin:e[0],polygon:e.slice(1,e.length-1)}},D=function(e){var n=e.center,t=e.polygon,c=Object(j.a)(e,["center","polygon"]),s=x().planet,l=s.biomes,b=s.elevationOffset,O=s.elevationScale,d=s.noiseMin,f=g().noise,S=Object(a.useState)(),h=Object(u.a)(S,2),m=h[0],D=h[1],C=Object(a.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1/0,t=1+Math.max(d,n)*O;return e.setLength(t),t}),[O,d]),M=Object(a.useCallback)((function(e){var i=f(n),a=C(e.center,i);if(i<=d)for(var c=0;c<t.length;c++)e.polygon[c].setLength(a);else for(var s=0;s<t.length;s++){var l=f(t[s]),o=i*b+l*(1-b);C(e.polygon[s],o)}return i}),[C,n,b,f,d,t]),y=Object(o.e)((function(e){var n=e.geometry.vertices,t=p(n),i=M(t),a=l.find((function(e){return i<=e.noiseMax}));a&&D(a.color)}),[M]);return Object(i.jsxs)("mesh",Object(r.a)(Object(r.a)({name:"TileMesh",ref:y},c),{},{children:[Object(i.jsx)("meshStandardMaterial",{color:m}),Object(i.jsx)(v,{center:n,polygon:t})]}))},C=t(72),M=t(65),y=t.n(M),z=t(66),N=t.n(z),w=t(67),R=t.n(w),P=function(e){var n=e.children,t=x().planet,c=Object(a.useState)(!0),s=Object(u.a)(c,2),l=s[0],o=s[1],r=Object(a.useState)([]),j=Object(u.a)(r,2),g=j[0],h=j[1],m=Object(a.useMemo)((function(){return new y.a({shape:[1,1],minDistance:t.minDistance,tries:t.tries},N()(t.seed))}),[t.minDistance,t.tries,t.seed]),v=Object(a.useMemo)((function(){return new R.a(t.seed)}),[t.seed]),p=Object(a.useCallback)((function(e){var n=e.x,i=e.y,a=e.z;return v.noise3D((n+t.noiseDistanceX)*t.noiseScaleX,(i+t.noiseDistanceY)*t.noiseScaleY,(a+t.noiseDistanceZ)*t.noiseScaleZ)}),[t.noiseDistanceX,t.noiseDistanceY,t.noiseDistanceZ,t.noiseScaleX,t.noiseScaleY,t.noiseScaleZ,v]),D=Object(a.useCallback)((function(e){var n=Object(u.a)(e,2),i=n[0],a=n[1];return(new b.Vector3).setFromSphericalCoords(t.noiseRadius,i,a)}),[t.noiseRadius]);return Object(a.useEffect)((function(){var e=m.fill().map(S),n=e.map(d),t=Object(C.a)(n),i=t.centers.map(f).map(D),a=t.polygons.map((function(n,t){return{center:D(e[t]),polygon:n.map((function(e){return i[e]}))}}));h(a),o(!1)}),[m,D]),l?null:Object(i.jsx)(O.Provider,{value:{noise:p,tiles:g},children:n})},T=function(){var e=g().tiles,n=x().planet.radius,t=Date.now().toString(),c=Object(a.useMemo)((function(){return new b.Vector3(n,n,n)}),[n]);return Object(i.jsx)("group",{name:"PlanetTiles",scale:c,children:e.map((function(e,n){var a=e.center,c=e.polygon;return Object(i.jsx)(D,{center:a,polygon:c},"".concat(t,"-").concat(n))}))})},V=function(){return Object(i.jsx)(P,{children:Object(i.jsx)(T,{})})},X=t(68),Y=Object(a.createContext)(null);Object(o.b)({OrbitControls:X.a});var Z=function(e){var n=e.children,t=Object(j.a)(e,["children"]),c=Object(a.useRef)(),s=Object(o.d)(),l=s.camera,r=s.gl;return Object(o.c)((function(){c&&c.current&&c.current.update()})),Object(a.useEffect)((function(){l.position.set(0,0,2)}),[l]),Object(i.jsxs)(Y.Provider,{value:t,children:[Object(i.jsx)("orbitControls",{args:[l,r.domElement],ref:c}),n]})},k=t(7),E=t(180),L=function(e){var n,t=e.children,c=Object(a.useState)(h.planet),s=Object(u.a)(c,2),l=s[0],o=s[1],j=function(e){return function(n){return o((function(t){return Object(r.a)(Object(r.a)({},t),{},Object(k.a)({},e,n))}))}};return Object(i.jsxs)(m.Provider,{value:{planet:l},children:[t,Object(i.jsxs)("form",{className:"Settings",children:[Object(i.jsx)(E.b,{className:"Settings-seed",label:"Seed",children:Object(i.jsx)(E.c,{defaultValue:l.seed,fill:!0,onChange:(n="seed",function(e){var t=e.currentTarget.value;return o((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(k.a)({},n,t))}))})})}),Object(i.jsx)(E.b,{className:"Settings-radius",label:"Radius",children:Object(i.jsx)(E.d,{fill:!0,min:.1,minorStepSize:null,onValueChange:j("radius"),stepSize:.1,value:l.radius})}),Object(i.jsx)(E.b,{className:"Settings-minDistance",label:"Sampling Minimum Distance",children:Object(i.jsx)(E.e,{labelStepSize:.02,max:.08,min:.02,onChange:j("minDistance"),stepSize:.01,value:l.minDistance})}),Object(i.jsx)(E.b,{className:"Settings-tries",label:"Sampling tries",children:Object(i.jsx)(E.e,{labelStepSize:8,max:24,min:0,onChange:j("tries"),stepSize:1,value:l.tries})}),Object(i.jsx)(E.b,{className:"Settings-noiseRadius",label:"Noise Radius",children:Object(i.jsx)(E.e,{labelStepSize:.8,max:3.4,min:.2,onChange:j("noiseRadius"),stepSize:.01,value:l.noiseRadius})}),Object(i.jsx)(E.b,{className:"Settings-noiseDistance",label:"Noise Distance",children:Object(i.jsxs)(E.a,{fill:!0,vertical:!1,children:[Object(i.jsx)(E.d,{fill:!0,onValueChange:j("noiseDistanceX"),stepSize:.1,value:l.noiseDistanceX}),Object(i.jsx)(E.d,{fill:!0,onValueChange:j("noiseDistanceY"),stepSize:.1,value:l.noiseDistanceY}),Object(i.jsx)(E.d,{fill:!0,onValueChange:j("noiseDistanceZ"),stepSize:.1,value:l.noiseDistanceZ})]})}),Object(i.jsx)(E.b,{className:"Settings-noiseScale",label:"Noise Scale",children:Object(i.jsxs)(E.a,{fill:!0,vertical:!1,children:[Object(i.jsx)(E.d,{fill:!0,min:.2,onValueChange:j("noiseScaleX"),stepSize:.1,value:l.noiseScaleX}),Object(i.jsx)(E.d,{fill:!0,min:.2,onValueChange:j("noiseScaleY"),stepSize:.1,value:l.noiseScaleY}),Object(i.jsx)(E.d,{fill:!0,min:.2,onValueChange:j("noiseScaleZ"),stepSize:.1,value:l.noiseScaleZ})]})}),Object(i.jsx)(E.b,{className:"Settings-noiseMin",label:"Minimum Noise",children:Object(i.jsx)(E.e,{labelStepSize:.5,max:1,min:-1,onChange:j("noiseMin"),stepSize:.1,value:l.noiseMin})}),Object(i.jsx)(E.b,{className:"Settings-elevationOffset",label:"Elevation Offset",children:Object(i.jsx)(E.e,{labelStepSize:.25,max:1,min:0,onChange:j("elevationOffset"),stepSize:.01,value:l.elevationOffset})}),Object(i.jsx)(E.b,{className:"Settings-elevationScale",label:"Elevation Scale",children:Object(i.jsx)(E.e,{labelStepSize:.25,max:.5,min:0,onChange:j("elevationScale"),stepSize:.01,value:l.elevationScale})})]})]})},F=function(){var e=x();return Object(i.jsx)(o.a,{className:"Scene",children:Object(i.jsxs)(m.Provider,{value:e,children:[Object(i.jsx)("ambientLight",{}),Object(i.jsxs)(Z,{children:[Object(i.jsx)("pointLight",{position:[10,10,10]}),Object(i.jsx)(V,{})]})]})})},I=function(){return Object(i.jsx)(L,{children:Object(i.jsx)(F,{})})},U=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,181)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,c=n.getLCP,s=n.getTTFB;t(e),i(e),a(e),c(e),s(e)}))};l.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(I,{})}),document.getElementById("root")),U()}},[[176,1,2]]]);
//# sourceMappingURL=main.39616444.chunk.js.map